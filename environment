# HCA DDS environment variables
#
# Source this file in your bash shell using "source environment".
#
# The environment variables set in this file are appropriate for the
# HCA DDS development environment. Individual environment variable
# values are overridden when deployed, based on the deployment stage.
# That logic resides in {chalice,daemons}/build_deploy_config.sh.

# Resolve the location of this file and set DDS_HOME to the root
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ] ; do SOURCE="$(readlink "$SOURCE")"; done
export DDS_HOME="$(cd -P "$(dirname "$SOURCE")" && pwd)"

EXPORT_ENV_VARS_TO_LAMBDA_ARRAY=(
    DDS_DEPLOYMENT_STAGE
	DSS_S3_BUCKET
	DSS_GS_BUCKET
)

set -a
EXPORT_ENV_VARS_TO_LAMBDA=${EXPORT_ENV_VARS_TO_LAMBDA_ARRAY[*]}
DDS_DEPLOYMENT_STAGE=dev
DDS_GCP_SERVICE_ACCOUNT_NAME="dds-delete"
DDS_TERRAFORM_BACKEND_BUCKET_TEMPLATE="org-humancellatlas-{account_id}-terraform"
AWS_DEFAULT_OUTPUT=json
AWS_DEFAULT_REGION=us-east-1
GCP_DEFAULT_REGION=us-central1
DDS_SECRETS_STORE="dcp/dds"
DDS_GCP_CREDENTIALS_SECRET="gcp-credentials.json"

DSS_ES_DOMAIN="dss-index-dev"
DSS_ES_DOMAIN_INTEGRATION="dss-index-integration"
DSS_ES_DOMAIN_STAGING="dss-index-staging"
DSS_ES_DOMAIN_STAGING="dss-index-prod"

DSS_S3_BUCKET="org-hca-dss-dev"
DSS_S3_BUCKET_INTEGRATION="org-hca-dss-integration"
DSS_S3_BUCKET_STAGING="org-humancellatlas-dss-staging"
DSS_S3_BUCKET_PROD="org-hca-dss-prod"
DSS_GS_BUCKET="org-hca-dss-dev"
DSS_GS_BUCKET_INTEGRATION="org-hca-dss-integration"
DSS_GS_BUCKET_STAGING="org-humancellatlas-dss-staging"
DSS_GS_BUCKET_PROD="org-hca-dss-prod"

DSS_S3_BUCKET_TEST_FIXTURES=org-hca-dss-test-fixtures

AWS_SDK_LOAD_CONFIG=1 # Needed for Terraform to correctly use AWS assumed roles
set +a

if [[ -f "${DDS_HOME}/environment.local" ]]; then
    source "${DDS_HOME}/environment.local"
fi
